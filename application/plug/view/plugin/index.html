{extend name="admin@public/base_content" /}
<!--头部描述信息开始<div class="container-fluid am-cf">-->
{block name="content_header">}{include file="admin@public/common" /}{/block}
<!--头部描述信息结束-->
<!-- 内容区域开始 <div class="row-content am-cf">-->
{block name="body">}
<div class="row-content am-cf">
    <!--表单内容开始-->
    <form class="m-form tpl-form-border-form tpl-form-border-br" role="form" action="{:url('')}" method="post" id="ajax_form"  >
        <div class="am-tabs am-margin" data-am-tabs="{noSwipe: 1}">
            <ul class="am-tabs-nav am-nav am-nav-tabs">
                <li class="am-active"><a href="#tab1">支付插件</a></li>
            </ul>

            <div class="am-tabs-bd">
                <div class="am-tab-panel am-fade am-in am-active" id="tab1">
                    <div class="am-u-sm-12">
                        <table width="100%" class="am-table am-table-compact am-table-striped tpl-table-black ">
                            <thead>
                            <tr>
                                <th class="table-id">图片</th>
                                <th>品牌名称</th>
                                <th>Logo</th>
                                <th>品牌分类</th>
                            </tr>
                            </thead>
                            <tbody>
                            {foreach name='payment' item='vo'}
                            <tr class="gradeX">
                                <td><img  style="width:150px; height:60px;" src="/static/plug/payment/{$vo.code}/{$vo.icon}" alt="..."></td>
                                <td>{$vo.name}</td>
                                <td>{$vo.desc}</td>
                                <td><a href="{:url('setting',array('type'=>$vo['type'],'code'=>$vo['code']))}" class="am-btn am-btn-secondary">配置</a></td>

                            </tr>
                            {/foreach}
                            <!-- more data -->
                            </tbody>
                        </table>
                    </div>


                </div>
            </div>
        </div>

        <div class="am-margin">



            <button type="button" class="am-btn am-btn-primary am-btn-xs" id="btn">提交保存</button>
            <button type="reset" class="am-btn am-btn-primary am-btn-xs">重置</button>
        </div>
        <!--表单内容结束-->
    </form>
</div>

{/block}
<!-- 内容区域结束 -->
<!-- 脚本文件开始 -->
{block name="script"}
<!--百度编辑器开始-->
<script type="text/javascript" charset="utf-8" src="__PLUG__/baidueditor/ueditor.config.js"></script>
<script type="text/javascript" charset="utf-8" src="__PLUG__/baidueditor/ueditor.all.js"> </script>
<!--建议手动加在语言，避免在ie下有时因为加载语言失败导致编辑器加载失败-->
<!--这里加载的语言文件会覆盖你在配置项目里添加的语言类型，比如你在配置项目里配置的是英文，这里加载的中文，那最后就是中文-->
<script type="text/javascript" charset="utf-8" src="__PLUG__/baidueditor/lang/zh-cn/zh-cn.js"></script>

<script type="text/javascript">
    //实例化编辑器
    //建议使用工厂方法getEditor创建和引用编辑器实例，如果在某个闭包下引用该编辑器，直接调用UE.getEditor('editor')就能拿到相关的实例
    var ue = UE.getEditor('content');
</script>
<!--百度编辑器结束-->
<!--jq时间控件开始-->
<link rel="stylesheet" type="text/css" href="__PLUG__/jqdate/jquery.datetimepicker.css"/>
<script src="__PLUG__/jqdate/build/jquery.datetimepicker.full.js"></script>
<script>
    $.datetimepicker.setLocale('ch');//设置中文
    $('.jqdate').datetimepicker({});
</script>
<!--jq时间控件结束-->

<script>
    //上传图片
    $(document).on('change',".file",function(){
        var obj=this;
        var action = "{:url('kbcms/admin_upload/upload')}";
        var file=obj.files[0];
        var xhr = new XMLHttpRequest();
        xhr.open("post", action, true); // 上传地址
        xhr.setRequestHeader("X-Requested-With", "XMLHttpRequest");
        xhr.onreadystatechange = function() {
            if (xhr.readyState == 4) {
                if (xhr.status == 200) {
                    var str = $.parseJSON(xhr.responseText); // 返回格式，此处为json，可以为别的格式
                    if (str.status==1){
                        var objUrl = getObjectURL(file) ;
                        //console.log("objUrl = "+objUrl) ;
                        var num=$(obj).attr("number");
                        if (objUrl) {
                            $("#img"+num).attr("src", objUrl);
                            $("#image"+num).val(str.url);
                        }
                    }else{
                        alert(str.msg);
                    }
                }
            }
        }
        var fd = new FormData();
        fd.append('file', file);
        xhr.send(fd);
    }) ;
    //建立一個可存取到該file的url
    function getObjectURL(file) {
        var url = null ;
        if (window.createObjectURL!=undefined) { // basic
            url = window.createObjectURL(file) ;
        } else if (window.URL!=undefined) { // mozilla(firefox)
            url = window.URL.createObjectURL(file) ;
        } else if (window.webkitURL!=undefined) { // webkit or chrome
            url = window.webkitURL.createObjectURL(file) ;
        }
        return url ;
    }
</script>
{/block}
<!-- 脚本文件结束 -->